#!/bin/bash
set -e

NOT_GIT='-not -name .git'
NOT_RUN='-not -name run'
NOT_DOT='-mindepth 1'
NOT_ALL='-maxdepth 1'

clean () {
  set -x
  find $PWD $NOT_DOT $NOT_ALL $NOT_GIT $NOT_RUN -execdir rm -f $HOME/{} \;
}

install () {
  set -x
  find $PWD $NOT_DOT $NOT_ALL $NOT_GIT $NOT_RUN -exec ln -s {} $HOME/. \;
}

case $1 in
  reinstall) clean; install ;;
  install)   install ;;
  clean)     clean ;;
  *)         echo "usage: $0 [ clean | install | reinstall ]" ;;
esac
